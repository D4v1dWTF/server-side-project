<% const title = 'Recurring Transactions'; const body = `
<div class="page-header">
    <h1>Recurring Transactions</h1>
    <a href="/recurrings/create" class="btn btn-primary">Create Recurring</a>
</div>

<% if (recurrings && recurrings.length > 0) { %>
<table class="data-table">
    <thead>
        <tr>
            <th>Description</th>
            <th>Type</th>
            <th>Account</th>
            <th>Amount</th>
            <th>Frequency</th>
            <th>Day of Month</th>
            <th>Status</th>
            <th>Last Applied</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <% recurrings.forEach(r => { %>
        <tr>
            <td><%= r.description %></td>
            <td><%= r.type %></td>
            <td><%= r.accountType %></td>
            <td>$<%= r.amount.toFixed(2) %></td>
            <td><%= r.frequency %></td>
            <td><%= r.dayOfMonth || '-' %></td>
            <td><%= r.isActive ? 'Active' : 'Inactive' %></td>
            <td><%= r.lastAppliedDate ? new Date(r.lastAppliedDate).toLocaleDateString() : 'Never' %></td>
            <td>
                <a href="/recurrings/<%= r._id %>/edit" class="btn btn-small">Edit</a>
                <form method="POST" action="/recurrings/<%= r._id %>/delete" style="display:inline;" onsubmit="return confirm('Delete this recurring transaction?')">
                    <button type="submit" class="btn btn-small btn-danger">Delete</button>
                </form>
            </td>
        </tr>
        <% }) %>
    </tbody>
</table>
<% } else { %>
<p>No recurring transactions. <a href="/recurrings/create">Create one</a></p>
<% } %>
`; %>
<%- include('../layout') %>

