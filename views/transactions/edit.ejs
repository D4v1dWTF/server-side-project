<% const title = 'Edit Transaction'; const body = `
<div class="page-header">
    <h1>Edit Transaction</h1>
    <a href="/transactions" class="btn btn-secondary">Back</a>
</div>

<form method="POST" action="/transactions/<%= transaction._id %>/edit" class="main-form">
    <div class="form-group">
        <label>Type</label>
        <input type="text" value="<%= transaction.type %>" disabled>
    </div>
    <div class="form-group">
        <label>Account</label>
        <input type="text" value="<%= transaction.accountType %>" disabled>
    </div>
    <div class="form-group">
        <label>Amount</label>
        <input type="text" value="$<%= transaction.amount.toFixed(2) %>" disabled>
    </div>
    <div class="form-group">
        <label for="description">Description</label>
        <input type="text" id="description" name="description" value="<%= transaction.description %>" maxlength="200" placeholder="Enter transaction description" required pattern=".{1,200}" title="Description is required (max 200 characters)">
    </div>
    <div class="form-group">
        <label for="category">Category</label>
        <select id="category" name="category">
            <option value="">Uncategorized</option>
            <% if (typeof categories !== 'undefined' && categories) { %>
            <% categories.forEach(cat => { %>
            <option value="<%= cat.name %>" <%= transaction.category === cat.name ? 'selected' : '' %>><%= cat.name %></option>
            <% }) %>
            <% } %>
        </select>
    </div>
    <div class="form-group">
        <label for="date">Date</label>
        <input type="date" id="date" name="date" value="<%= new Date(transaction.date).toISOString().split('T')[0] %>" required title="Select transaction date">
    </div>
    <button type="submit" class="btn btn-primary">Update</button>
</form>
`; %>
<%- include('../layout') %>
